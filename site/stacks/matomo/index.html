



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="AnaxExp documentation">
      
      
        <link rel="canonical" href="https://anaxexp.github.io/docs/stacks/matomo/">
      
      
        <meta name="author" content="AnaxExp, LLC.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.1, mkdocs-material-3.0.3">
    
    
      
        <title>Matomo - AnaxExp documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../assets/anaxexp.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#matomo-stack-documentation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://anaxexp.github.io/docs" title="AnaxExp documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                AnaxExp documentation

                <span class="stack-page-link-wrapper">
                  <a href="https://anaxexp.com/stacks" class="stack-page-link" target="_blank">
                    Browse stacks
                  </a>
                </span>
              </span>
              <span class="md-header-nav__topic">
                Matomo
              </span>
            
          
        </div>
      </div>

      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>

      
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          


  


  <a href="https://github.com/anaxexp/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      anaxexp/docs
    </div>
  </a>

        </div>
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        



<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
      
  <li class="md-tabs__item">
    
      <a href="../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../apps/new/" title="Apps" class="md-tabs__link">
          Apps
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../infrastructure/" title="Infrastructure" class="md-tabs__link">
          Infrastructure
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Stacks" class="md-tabs__link md-tabs__link--active">
          Stacks
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../integrations/aws/" title="Integrations" class="md-tabs__link">
          Integrations
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../cluster/" title="Cluster" class="md-tabs__link">
          Cluster
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://anaxexp.github.io/docs" title="AnaxExp documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    AnaxExp documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/anaxexp/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      anaxexp/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../billing/" title="Billing" class="md-nav__link">
      Billing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../dev/" title="Development" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../status/" title="Status" class="md-nav__link">
      Status
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../roles/" title="User roles" class="md-nav__link">
      User roles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/new/" title="New app" class="md-nav__link">
      New app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/instances/" title="Instances" class="md-nav__link">
      Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/deploy/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/domains/" title="Domains" class="md-nav__link">
      Domains
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/backups/" title="Backups" class="md-nav__link">
      Backups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/logs/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/post-deployment-scripts/" title="Post-deployment scripts" class="md-nav__link">
      Post-deployment scripts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Infrastructure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Infrastructure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/connecting-server/" title="Connecting server" class="md-nav__link">
      Connecting server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/env-vars/" title="Environment variables" class="md-nav__link">
      Environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/disk/" title="Disk" class="md-nav__link">
      Disk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/maintenance/" title="Maintenance" class="md-nav__link">
      Maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/hsts/" title="HSTS" class="md-nav__link">
      HSTS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/ufw/" title="UFW" class="md-nav__link">
      UFW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../infrastructure/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Stacks
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Stacks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../config/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template/" title="Template" class="md-nav__link">
      Template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../maintenance/" title="Maintenance" class="md-nav__link">
      Maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-5" type="checkbox" id="nav-11-5">
    
    <label class="md-nav__link" for="nav-11-5">
      Drupal
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-5">
        Drupal
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../drupal/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../drupal/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../drupal/local/" title="Local environment" class="md-nav__link">
      Local environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../drupal/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-6" type="checkbox" id="nav-11-6">
    
    <label class="md-nav__link" for="nav-11-6">
      WordPress
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-6">
        WordPress
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../wordpress/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wordpress/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wordpress/local/" title="Local environment" class="md-nav__link">
      Local environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wordpress/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-7" type="checkbox" id="nav-11-7">
    
    <label class="md-nav__link" for="nav-11-7">
      PHP
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-7">
        PHP
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../php/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../php/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../php/local/" title="Local environment" class="md-nav__link">
      Local environment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-8" type="checkbox" id="nav-11-8">
    
    <label class="md-nav__link" for="nav-11-8">
      GitLab
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-8">
        GitLab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gitlab/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gitlab/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../html/" title="HTML" class="md-nav__link">
      HTML
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Matomo
      </label>
    
    <a href="./" title="Matomo" class="md-nav__link md-nav__link--active">
      Matomo
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" title="Setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis-integration" title="Redis integration" class="md-nav__link">
    Redis integration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mail-delivery" title="Mail delivery" class="md-nav__link">
    Mail delivery
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" title="Cron" class="md-nav__link">
    Cron
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#containers" title="Containers" class="md-nav__link">
    Containers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php" title="PHP" class="md-nav__link">
    PHP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-directory-permissions" title="Files directory permissions" class="md-nav__link">
    Files directory permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" title="Environment variables" class="md-nav__link">
    Environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crond" title="Crond" class="md-nav__link">
    Crond
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sshd" title="SSHd" class="md-nav__link">
    SSHd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensmtpd" title="OpenSMTPD" class="md-nav__link">
    OpenSMTPD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mariadb" title="MariaDB" class="md-nav__link">
    MariaDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" title="Changelog" class="md-nav__link">
    Changelog
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#031" title="0.3.1" class="md-nav__link">
    0.3.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#030" title="0.3.0" class="md-nav__link">
    0.3.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#021" title="0.2.1" class="md-nav__link">
    0.2.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#020" title="0.2.0" class="md-nav__link">
    0.2.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#010" title="0.1.0" class="md-nav__link">
    0.1.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cachet/" title="Cachet" class="md-nav__link">
      Cachet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mariadb/" title="MariaDB" class="md-nav__link">
      MariaDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../postgres/" title="PostgreSQL" class="md-nav__link">
      PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../solr/" title="Solr" class="md-nav__link">
      Solr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../solr-drupal/" title="Solr for Drupal" class="md-nav__link">
      Solr for Drupal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../opensmtpd/" title="OpenSMTPD" class="md-nav__link">
      OpenSMTPD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../athenapdf/" title="AthenaPDF" class="md-nav__link">
      AthenaPDF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../redis/" title="Redis" class="md-nav__link">
      Redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../docker-registry/" title="Docker registry" class="md-nav__link">
      Docker registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../slackin/" title="Slackin" class="md-nav__link">
      Slackin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/aws/" title="AWS" class="md-nav__link">
      AWS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/azure/" title="Azure" class="md-nav__link">
      Azure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/bitbucket/" title="BitBucket" class="md-nav__link">
      BitBucket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/cloudflare/" title="CloudFlare" class="md-nav__link">
      CloudFlare
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/digitalocean/" title="DigitalOcean" class="md-nav__link">
      DigitalOcean
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/docker-registry/" title="Docker registry" class="md-nav__link">
      Docker registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/gcp/" title="GCP" class="md-nav__link">
      GCP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/github/" title="GitHub" class="md-nav__link">
      GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/gitlab/" title="GitLab" class="md-nav__link">
      GitLab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/linode/" title="Linode" class="md-nav__link">
      Linode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/sendgrid/" title="SendGrid" class="md-nav__link">
      SendGrid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/custom/" title="Custom provider" class="md-nav__link">
      Custom provider
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Cluster
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Cluster
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../cluster/" title="Kubernetes cluster" class="md-nav__link">
      Kubernetes cluster
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" title="Setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis-integration" title="Redis integration" class="md-nav__link">
    Redis integration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mail-delivery" title="Mail delivery" class="md-nav__link">
    Mail delivery
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cron" title="Cron" class="md-nav__link">
    Cron
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#containers" title="Containers" class="md-nav__link">
    Containers
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#php" title="PHP" class="md-nav__link">
    PHP
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#files-directory-permissions" title="Files directory permissions" class="md-nav__link">
    Files directory permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" title="Environment variables" class="md-nav__link">
    Environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crond" title="Crond" class="md-nav__link">
    Crond
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sshd" title="SSHd" class="md-nav__link">
    SSHd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#opensmtpd" title="OpenSMTPD" class="md-nav__link">
    OpenSMTPD
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mariadb" title="MariaDB" class="md-nav__link">
    MariaDB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changelog" title="Changelog" class="md-nav__link">
    Changelog
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#031" title="0.3.1" class="md-nav__link">
    0.3.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#030" title="0.3.0" class="md-nav__link">
    0.3.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#021" title="0.2.1" class="md-nav__link">
    0.2.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#020" title="0.2.0" class="md-nav__link">
    0.2.0
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#010" title="0.1.0" class="md-nav__link">
    0.1.0
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/anaxexp/docs/edit/master/docs/stacks/matomo/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="matomo-stack-documentation">Matomo stack documentation<a class="headerlink" href="#matomo-stack-documentation" title="Permanent link">&para;</a></h1>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>Use the following credentials during the initial setup on the Database Setup step:</p>
<ul>
<li>Database Server: <code>matomo</code></li>
<li>Login: <code>matomo</code></li>
<li>Password: Copy the value of <code>MYSQL_PASSWORD</code> from <code>[Instance] &gt; Stack &gt; Database</code> page</li>
<li>Database Name: <code>matomo</code></li>
</ul>
<h2 id="redis-integration">Redis integration<a class="headerlink" href="#redis-integration" title="Permanent link">&para;</a></h2>
<p>You can use redis to store Matomo cachet (by default stored in the local filesystem):</p>
<ul>
<li>Enable redis service in your application stack from <code>[Instance] &gt; Stack</code> page</li>
<li>Copy your instance UUID from <code>[Instance] &gt; Settings</code> page</li>
<li>Access the server hosting your matomo instance as root and append <code>/srv/anaxexp/instances/[INSTANCE UUID]/app/config/config.ini.php</code> file with the following values:</li>
</ul>
<div class="codehilite"><pre><span></span>[Cache]
backend = chained

[ChainedCache]
backends[] = array
backends[] = redis

[RedisCache]
host = &quot;redis&quot;
port = 6379
timeout = 0.0
password = &quot;Copy the value of `REDIS_PASSWORD` from `[Instance] &gt; Stack &gt; Redis page`&quot;
database = 14
</pre></div>

<h2 id="mail-delivery">Mail delivery<a class="headerlink" href="#mail-delivery" title="Permanent link">&para;</a></h2>
<p>Go to <code>Settings &gt; System &gt; General settings &gt; Email server settings</code> in your Matomo instance. Specify <code>opensmtpd</code> as server address and <code>25</code> as port. For more details how to configure guaranteed email delivery see <a href="../opensmtpd/">OpenSMTPD stack documentation</a></p>
<div class="admonition warning">
<p class="admonition-title">No delivery guarantee</p>
<p>If you're using a server from a public cloud there's a good chance that its IP is already compromised and blacklisted by major mail services, hence your emails will not be delivered or will land in the spam folder. We strongly recommend using OpenSMTPD <a href="../opensmtpd/#integration-with-3rd-party-smtp-servers">in pair with a third-party SMTP services</a>.</p>
</div>
<h2 id="cron">Cron<a class="headerlink" href="#cron" title="Permanent link">&para;</a></h2>
<p>By default we run the following cron command from <a href="#crond">crond container</a> every hour:</p>
<div class="codehilite"><pre><span></span>/usr/local/bin/php /var/www/html/console core:archive --url=${ANAXEXP_URL_PRIMARY}
</pre></div>

<h2 id="containers">Containers<a class="headerlink" href="#containers" title="Permanent link">&para;</a></h2>
<h3 id="php">PHP<a class="headerlink" href="#php" title="Permanent link">&para;</a></h3>
<ul>
<li>PHP can be configured with the following <a href="https://github.com/anaxexp/drupal-php#environment-variables">environment variables</a></li>
<li>Available <a href="https://github.com/anaxexp/php#php-extensions">php extensions</a></li>
<li>Composer pre-installed with a default global package <code>hirak/prestissimo:^0.3</code> to download dependencies in parallel </li>
</ul>
<h3 id="files-directory-permissions">Files directory permissions<a class="headerlink" href="#files-directory-permissions" title="Permanent link">&para;</a></h3>
<p>Public files directory (symlink to <code>/mnt/files/public</code>) that used for uploads owned by <code>www-data</code> user (PHP-FPM user) by default and the default container user (<code>anaxexp</code>) has no writing permissions. So if you run a command that creates files in a public directory you will get insufficient permissions error. You can fix this problem by giving writing permissions for files directory to the owner's group (user <code>anaxexp</code> is a member of <code>www-data</code> group) by using one of the <a href="https://github.com/anaxexp/php#helper-scripts">helper scripts</a>:</p>
<div class="codehilite"><pre><span></span>sudo files_chmod /mnt/files/public
</pre></div>

<p>For mode details about users and permissions in PHP container see <a href="https://github.com/anaxexp/php#users-and-permissions">https://github.com/anaxexp/php#users-and-permissions</a></p>
<h3 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Variables availability</p>
<p>Environment variables provided by AnaxExp are always available in PHP even if <code>PHP_FPM_CLEAR_ENV</code> set to <code>no</code>. </p>
</div>
<p>In addition to <a href="../../infrastructure/env-vars/">global environment variables</a>, we provide the following variables in PHP container that you can use in your <a href="../../apps/post-deployment-scripts/">post-deployment scripts</a> or settings files:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$APP_ROOT</code></td>
<td><code>/var/www/html</code> by default</td>
</tr>
<tr>
<td><code>$HTTP_ROOT</code></td>
<td>e.g. <code>/var/www/html/web</code></td>
</tr>
<tr>
<td><code>$CONF_DIR</code></td>
<td><code>/var/www/conf</code> by default</td>
</tr>
<tr>
<td><code>$ANAXEXP_APP_NAME</code></td>
<td>My app</td>
</tr>
<tr>
<td><code>$ANAXEXP_HOST_PRIMARY</code></td>
<td>example.com</td>
</tr>
<tr>
<td><code>$ANAXEXP_URL_PRIMARY</code></td>
<td><a href="http://example.com">http://example.com</a></td>
</tr>
<tr>
<td><code>$ANAXEXP_HOSTS</code></td>
<td><code>[ &quot;example.com&quot;, &quot;dev.example.org.wod.by&quot; ]</code></td>
</tr>
</tbody>
</table>
<p>Deprecated variables:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Instead use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$ANAXEXP_APP_ROOT</code></td>
<td><code>$APP_ROOT</code></td>
</tr>
<tr>
<td><code>$ANAXEXP_APP_DOCROOT</code></td>
<td><code>$HTTP_ROOT</code></td>
</tr>
<tr>
<td><code>$ANAXEXP_CONF</code></td>
<td><code>$CONF_DIR</code></td>
</tr>
<tr>
<td><code>$ANAXEXP_DIR_CONF</code></td>
<td><code>$CONF_DIR</code></td>
</tr>
</tbody>
</table>
<h3 id="crond">Crond<a class="headerlink" href="#crond" title="Permanent link">&para;</a></h3>
<p>A duplicate of the main PHP container runs with crond (instead of FPM). You can customize crontab from <code>[Instance] &gt; Stack &gt; Settings</code> page.</p>
<p><code>$ANAXEXP_HOST_PRIMARY</code> is a domain marked as primary. </p>
<h3 id="sshd">SSHd<a class="headerlink" href="#sshd" title="Permanent link">&para;</a></h3>
<p>A duplicate of PHP container runs with SSH daemon (instead of FPM). You can find access information on <code>[Instance] &gt; Stack &gt; SSH</code></p>
<p>Public SSH keys from your AnaxExp profile will be added automatically for all users that have access to an instance. </p>
<h3 id="opensmtpd"><a href="../opensmtpd/">OpenSMTPD</a><a class="headerlink" href="#opensmtpd" title="Permanent link">&para;</a></h3>
<h3 id="mariadb"><a href="../mariadb/">MariaDB</a><a class="headerlink" href="#mariadb" title="Permanent link">&para;</a></h3>
<h3 id="redis"><a href="../redis/">Redis</a><a class="headerlink" href="#redis" title="Permanent link">&para;</a></h3>
<h2 id="changelog">Changelog<a class="headerlink" href="#changelog" title="Permanent link">&para;</a></h2>
<h3 id="031">0.3.1<a class="headerlink" href="#031" title="Permanent link">&para;</a></h3>
<ul>
<li>Matomo updated to 3.5.1</li>
<li>Added Nginx 1.14, 1.15</li>
<li>MariaBD:</li>
<li>Added new version 10.3</li>
<li>Version 10.2 updated to 10.2.15</li>
<li>Default <code>innodb_buffer_pool_size</code> set to <code>128M</code> that should significantly decrease memory usage</li>
<li>PHP error reporting now exludes strict and deprecated errors</li>
</ul>
<h3 id="030">0.3.0<a class="headerlink" href="#030" title="Permanent link">&para;</a></h3>
<ul>
<li>Matomo updated to 3.5.0</li>
<li>Added SSHD container</li>
<li>Matomo image rebased to latest stable PHP 7.1 image (<code>anaxexp/php:7.1-4.4.2</code>)</li>
</ul>
<h3 id="021">0.2.1<a class="headerlink" href="#021" title="Permanent link">&para;</a></h3>
<ul>
<li>Bugfix: cron task failed</li>
</ul>
<h3 id="020">0.2.0<a class="headerlink" href="#020" title="Permanent link">&para;</a></h3>
<ul>
<li>PHP updated to 7.1.15 (security updates)</li>
<li>Redis service added</li>
<li>Docs: added instructions for redis and email configuration</li>
<li>Bugfix: insufficient permissions for plugins install</li>
</ul>
<h3 id="010">0.1.0<a class="headerlink" href="#010" title="Permanent link">&para;</a></h3>
<ul>
<li>Initial release</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
    
    <div class="md-footer-nav">
        <nav class="md-footer-nav__inner md-grid">
            
            <a href="stacks/html/" title="HTML" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
                </div>
                <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                Previous
                </span>
              HTML
              </span>
                </div>
            </a>
            
            
            <a href="stacks/cachet/" title="Cachet" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
                <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                Next
                </span>
              Cachet
              </span>
                </div>
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
                </div>
            </a>
            
        </nav>
    </div>
    
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
            <a target="_blank" href="http://anaxexp.com/" title="AnaxExp" class="md-header-nav__button md-logo">
                <img src="../../assets/images/anaxexp-logo.png" width="24" height="24">
            </a>

            
            
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://anaxexp.com" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/anaxexp" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/AnaxExpHQ" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

            
        </div>
    </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.1",url:{base:"../.."}})</script>
      
        <script src="../../assets/intercom.js"></script>
      
        <script src="../../assets/anaxexp.js"></script>
      
    
    
      
    
  </body>
</html>