



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="AnaxExp documentation">
      
      
        <link rel="canonical" href="https://anaxexp.github.io/docs/stacks/wordpress/containers/">
      
      
        <meta name="author" content="AnaxExp, LLC.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.1, mkdocs-material-3.0.3">
    
    
      
        <title>Containers - AnaxExp documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../../assets/anaxexp.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../../#wordpress-stack-containers" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://anaxexp.github.io/docs" title="AnaxExp documentation" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                AnaxExp documentation

                <span class="stack-page-link-wrapper">
                  <a href="https://anaxexp.com/stacks" class="stack-page-link" target="_blank">
                    Browse stacks
                  </a>
                </span>
              </span>
              <span class="md-header-nav__topic">
                Containers
              </span>
            
          
        </div>
      </div>

      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>

      
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          


  


  <a href="https://github.com/anaxexp/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      anaxexp/docs
    </div>
  </a>

        </div>
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        



<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
      
  <li class="md-tabs__item">
    
      <a href="../../.." title="Home" class="md-tabs__link">
        Home
      </a>
    
  </li>

      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../../apps/new/" title="Apps" class="md-tabs__link">
          Apps
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../../infrastructure/" title="Infrastructure" class="md-tabs__link">
          Infrastructure
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../" title="Stacks" class="md-tabs__link md-tabs__link--active">
          Stacks
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../../integrations/aws/" title="Integrations" class="md-tabs__link">
          Integrations
        </a>
      
    </li>
  

      
      
  
  
    <li class="md-tabs__item">
      
        <a href="../../../cluster/" title="Cluster" class="md-tabs__link">
          Cluster
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://anaxexp.github.io/docs" title="AnaxExp documentation" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    AnaxExp documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/anaxexp/docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      anaxexp/docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../billing/" title="Billing" class="md-nav__link">
      Billing
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../dev/" title="Development" class="md-nav__link">
      Development
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../status/" title="Status" class="md-nav__link">
      Status
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../roles/" title="User roles" class="md-nav__link">
      User roles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/new/" title="New app" class="md-nav__link">
      New app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/instances/" title="Instances" class="md-nav__link">
      Instances
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/deploy/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/domains/" title="Domains" class="md-nav__link">
      Domains
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/backups/" title="Backups" class="md-nav__link">
      Backups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/logs/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../apps/post-deployment-scripts/" title="Post-deployment scripts" class="md-nav__link">
      Post-deployment scripts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Infrastructure
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Infrastructure
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/connecting-server/" title="Connecting server" class="md-nav__link">
      Connecting server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/monitoring/" title="Monitoring" class="md-nav__link">
      Monitoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/env-vars/" title="Environment variables" class="md-nav__link">
      Environment variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/disk/" title="Disk" class="md-nav__link">
      Disk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/maintenance/" title="Maintenance" class="md-nav__link">
      Maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/hsts/" title="HSTS" class="md-nav__link">
      HSTS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/ufw/" title="UFW" class="md-nav__link">
      UFW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../infrastructure/cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11" checked>
    
    <label class="md-nav__link" for="nav-11">
      Stacks
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        Stacks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../config/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../template/" title="Template" class="md-nav__link">
      Template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../maintenance/" title="Maintenance" class="md-nav__link">
      Maintenance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-5" type="checkbox" id="nav-11-5">
    
    <label class="md-nav__link" for="nav-11-5">
      Drupal
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-5">
        Drupal
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../drupal/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../drupal/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../drupal/local/" title="Local environment" class="md-nav__link">
      Local environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../drupal/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-6" type="checkbox" id="nav-11-6" checked>
    
    <label class="md-nav__link" for="nav-11-6">
      WordPress
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-6">
        WordPress
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Containers
      </label>
    
    <a href="./" title="Containers" class="md-nav__link md-nav__link--active">
      Containers
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nginx" title="Nginx" class="md-nav__link">
    Nginx
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-config" title="Custom config" class="md-nav__link">
    Custom config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-config_1" title="Custom config" class="md-nav__link">
    Custom config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mod-pagespeed" title="Mod pagespeed" class="md-nav__link">
    Mod pagespeed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache" title="Apache" class="md-nav__link">
    Apache
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#php" title="PHP" class="md-nav__link">
    PHP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#files-directory-permissions" title="Files directory permissions" class="md-nav__link">
    Files directory permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" title="Environment variables" class="md-nav__link">
    Environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xdebug-local" title="Xdebug (local)" class="md-nav__link">
    Xdebug (local)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-web-requests" title="Debugging web requests" class="md-nav__link">
    Debugging web requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-cli-requests" title="Debugging CLI requests" class="md-nav__link">
    Debugging CLI requests
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-docker" title="Linux, Docker" class="md-nav__link">
    Linux, Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macos-docker" title="macOS, Docker" class="md-nav__link">
    macOS, Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" title="Windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ide-configuration" title="IDE configuration" class="md-nav__link">
    IDE configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phpstorm" title="PHPStorm" class="md-nav__link">
    PHPStorm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newrelic" title="NewRelic" class="md-nav__link">
    NewRelic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profiling" title="Profiling" class="md-nav__link">
    Profiling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wp-cli" title="WP CLI" class="md-nav__link">
    WP CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" title="Redirects" class="md-nav__link">
    Redirects
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crond" title="Crond" class="md-nav__link">
    Crond
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sshd" title="SSHd" class="md-nav__link">
    SSHd
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailhog" title="Mailhog" class="md-nav__link">
    Mailhog
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensmtpd" title="OpenSMTPD" class="md-nav__link">
    OpenSMTPD
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mariadb" title="MariaDB" class="md-nav__link">
    MariaDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nodejs" title="Node.js" class="md-nav__link">
    Node.js
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varnish" title="Varnish" class="md-nav__link">
    Varnish
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsyslog" title="Rsyslog" class="md-nav__link">
    Rsyslog
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blackfire" title="Blackfire" class="md-nav__link">
    Blackfire
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webgrind" title="Webgrind" class="md-nav__link">
    Webgrind
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../local/" title="Local environment" class="md-nav__link">
      Local environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-7" type="checkbox" id="nav-11-7">
    
    <label class="md-nav__link" for="nav-11-7">
      PHP
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-7">
        PHP
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../php/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../php/containers/" title="Containers" class="md-nav__link">
      Containers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../php/local/" title="Local environment" class="md-nav__link">
      Local environment
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-11-8" type="checkbox" id="nav-11-8">
    
    <label class="md-nav__link" for="nav-11-8">
      GitLab
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-11-8">
        GitLab
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../gitlab/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../gitlab/changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../html/" title="HTML" class="md-nav__link">
      HTML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../matomo/" title="Matomo" class="md-nav__link">
      Matomo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../cachet/" title="Cachet" class="md-nav__link">
      Cachet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../mariadb/" title="MariaDB" class="md-nav__link">
      MariaDB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../postgres/" title="PostgreSQL" class="md-nav__link">
      PostgreSQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../solr/" title="Solr" class="md-nav__link">
      Solr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../solr-drupal/" title="Solr for Drupal" class="md-nav__link">
      Solr for Drupal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../opensmtpd/" title="OpenSMTPD" class="md-nav__link">
      OpenSMTPD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../elasticsearch/" title="Elasticsearch" class="md-nav__link">
      Elasticsearch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../athenapdf/" title="AthenaPDF" class="md-nav__link">
      AthenaPDF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../redis/" title="Redis" class="md-nav__link">
      Redis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../varnish/" title="Varnish" class="md-nav__link">
      Varnish
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docker-registry/" title="Docker registry" class="md-nav__link">
      Docker registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../slackin/" title="Slackin" class="md-nav__link">
      Slackin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/aws/" title="AWS" class="md-nav__link">
      AWS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/azure/" title="Azure" class="md-nav__link">
      Azure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/bitbucket/" title="BitBucket" class="md-nav__link">
      BitBucket
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/cloudflare/" title="CloudFlare" class="md-nav__link">
      CloudFlare
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/digitalocean/" title="DigitalOcean" class="md-nav__link">
      DigitalOcean
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/docker-registry/" title="Docker registry" class="md-nav__link">
      Docker registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/gcp/" title="GCP" class="md-nav__link">
      GCP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/github/" title="GitHub" class="md-nav__link">
      GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/gitlab/" title="GitLab" class="md-nav__link">
      GitLab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/linode/" title="Linode" class="md-nav__link">
      Linode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/sendgrid/" title="SendGrid" class="md-nav__link">
      SendGrid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/custom/" title="Custom provider" class="md-nav__link">
      Custom provider
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Cluster
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Cluster
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../cluster/" title="Kubernetes cluster" class="md-nav__link">
      Kubernetes cluster
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nginx" title="Nginx" class="md-nav__link">
    Nginx
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#custom-config" title="Custom config" class="md-nav__link">
    Custom config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-config_1" title="Custom config" class="md-nav__link">
    Custom config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mod-pagespeed" title="Mod pagespeed" class="md-nav__link">
    Mod pagespeed
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache" title="Apache" class="md-nav__link">
    Apache
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#php" title="PHP" class="md-nav__link">
    PHP
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#files-directory-permissions" title="Files directory permissions" class="md-nav__link">
    Files directory permissions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#environment-variables" title="Environment variables" class="md-nav__link">
    Environment variables
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xdebug-local" title="Xdebug (local)" class="md-nav__link">
    Xdebug (local)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-web-requests" title="Debugging web requests" class="md-nav__link">
    Debugging web requests
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-cli-requests" title="Debugging CLI requests" class="md-nav__link">
    Debugging CLI requests
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linux-docker" title="Linux, Docker" class="md-nav__link">
    Linux, Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#macos-docker" title="macOS, Docker" class="md-nav__link">
    macOS, Docker
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows" title="Windows" class="md-nav__link">
    Windows
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ide-configuration" title="IDE configuration" class="md-nav__link">
    IDE configuration
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phpstorm" title="PHPStorm" class="md-nav__link">
    PHPStorm
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newrelic" title="NewRelic" class="md-nav__link">
    NewRelic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#profiling" title="Profiling" class="md-nav__link">
    Profiling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wp-cli" title="WP CLI" class="md-nav__link">
    WP CLI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redirects" title="Redirects" class="md-nav__link">
    Redirects
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crond" title="Crond" class="md-nav__link">
    Crond
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sshd" title="SSHd" class="md-nav__link">
    SSHd
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mailhog" title="Mailhog" class="md-nav__link">
    Mailhog
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#opensmtpd" title="OpenSMTPD" class="md-nav__link">
    OpenSMTPD
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mariadb" title="MariaDB" class="md-nav__link">
    MariaDB
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nodejs" title="Node.js" class="md-nav__link">
    Node.js
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" title="Redis" class="md-nav__link">
    Redis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#varnish" title="Varnish" class="md-nav__link">
    Varnish
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rsyslog" title="Rsyslog" class="md-nav__link">
    Rsyslog
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blackfire" title="Blackfire" class="md-nav__link">
    Blackfire
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#webgrind" title="Webgrind" class="md-nav__link">
    Webgrind
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/anaxexp/docs/edit/master/docs/stacks/wordpress/containers.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="wordpress-stack-containers">WordPress stack containers<a class="headerlink" href="#wordpress-stack-containers" title="Permanent link">&para;</a></h1>
<h2 id="nginx">Nginx<a class="headerlink" href="#nginx" title="Permanent link">&para;</a></h2>
<ul>
<li>Nginx can be configured with the following <a href="https://github.com/anaxexp/wordpress-nginx#environment-variables">environment variables</a></li>
<li>Default Nginx <a href="https://github.com/anaxexp/wordpress-nginx/blob/master/templates/vhost.conf.tpl">virtual host config</a></li>
<li>Installed <a href="https://github.com/anaxexp/nginx/blob/master/test/nginx_modules">nginx modules</a></li>
</ul>
<p>Restarting nginx as default user:</p>
<div class="codehilite"><pre><span></span>sudo nginx -s reload
</pre></div>

<div class="admonition warning">
<p class="admonition-title">Do not gzip pages in WordPress</p>
<p>We already gzip content on Nginx side and it works faster. Having double gzip may cause issues.</p>
</div>
<h3 id="custom-config">Custom config<a class="headerlink" href="#custom-config" title="Permanent link">&para;</a></h3>
<p>If the default config and available environment variables are not enough for your customizations you can replace the config with your own:</p>
<ol>
<li>Copy <code>/etc/nginx/conf.d/php.conf</code> to your codebase, adjust to your needs</li>
<li>Deploy code with your config file</li>
<li>Add new environment variable <code>NGINX_CONF_INCLUDE</code> for nginx service, the value should the path to your *.conf file (e.g. <code>/var/www/html/nginx.conf</code>)</li>
</ol>
<h3 id="custom-config_1">Custom config<a class="headerlink" href="#custom-config_1" title="Permanent link">&para;</a></h3>
<p>If the default wordpress config and available environment variables are not enough for your customizations you can replace the config with your own:</p>
<ol>
<li>Copy <code>/etc/nginx/conf.d/wordpress.conf</code> to your codebase, adjust to your needs</li>
<li>Deploy code with your config file</li>
<li>Add new environment variable <code>NGINX_CONF_INCLUDE</code> for nginx service, the value should the path to your *.conf file (e.g. <code>/var/www/html/nginx.conf</code></li>
</ol>
<h3 id="mod-pagespeed">Mod pagespeed<a class="headerlink" href="#mod-pagespeed" title="Permanent link">&para;</a></h3>
<p>Nginx comes with <a href="https://www.modpagespeed.com/">mod_pagespeed</a> which is disabled by default. To enable it add <code>NGINX_PAGESPEED=on</code> environment variable to Nginx service.</p>
<h2 id="apache">Apache<a class="headerlink" href="#apache" title="Permanent link">&para;</a></h2>
<ul>
<li>Apache can be configured with the following <a href="https://github.com/anaxexp/php-apache#environment-variables">environment variables</a></li>
<li>Default Apache <a href="https://github.com/anaxexp/php-apache/blob/master/templates/vhost.conf.tpl">virtual host config</a></li>
<li>Installed <a href="https://github.com/anaxexp/apache/blob/master/test/apache_modules">apache modules</a> </li>
</ul>
<p>Restarting apache as default user:</p>
<div class="codehilite"><pre><span></span>sudo httpd -k restart
</pre></div>

<h2 id="php">PHP<a class="headerlink" href="#php" title="Permanent link">&para;</a></h2>
<ul>
<li>PHP can be configured with the following <a href="https://github.com/anaxexp/drupal-php#environment-variables">environment variables</a></li>
<li>Available <a href="https://github.com/anaxexp/php#php-extensions">php extensions</a></li>
<li>Composer pre-installed with a default global package <code>hirak/prestissimo:^0.3</code> to download dependencies in parallel </li>
</ul>
<h3 id="files-directory-permissions">Files directory permissions<a class="headerlink" href="#files-directory-permissions" title="Permanent link">&para;</a></h3>
<p>Public files directory (symlink to <code>/mnt/files/public</code>) that used for uploads owned by <code>www-data</code> user (PHP-FPM user) by default and the default container user (<code>anaxexp</code>) has no writing permissions. So if you run a command that creates files in a public directory you will get insufficient permissions error. You can fix this problem by giving writing permissions for files directory to the owner's group (user <code>anaxexp</code> is a member of <code>www-data</code> group) by using one of the <a href="https://github.com/anaxexp/php#helper-scripts">helper scripts</a>:</p>
<div class="codehilite"><pre><span></span>sudo files_chmod /mnt/files/public
</pre></div>

<p>For mode details about users and permissions in PHP container see <a href="https://github.com/anaxexp/php#users-and-permissions">https://github.com/anaxexp/php#users-and-permissions</a></p>
<h3 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Variables availability</p>
<p>Environment variables provided by AnaxExp are always available in PHP even if <code>PHP_FPM_CLEAR_ENV</code> set to <code>no</code>. </p>
</div>
<p>In addition to <a href="../../../infrastructure/env-vars/">global environment variables</a>, we provide the following variables in PHP container that you can use in your <a href="../../../apps/post-deployment-scripts/">post-deployment scripts</a> or settings files:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$APP_ROOT</code></td>
<td><code>/var/www/html</code> by default</td>
</tr>
<tr>
<td><code>$HTTP_ROOT</code></td>
<td>e.g. <code>/var/www/html/web</code></td>
</tr>
<tr>
<td><code>$CONF_DIR</code></td>
<td><code>/var/www/conf</code> by default</td>
</tr>
<tr>
<td><code>$ANAXEXP_APP_NAME</code></td>
<td>My app</td>
</tr>
<tr>
<td><code>$ANAXEXP_HOST_PRIMARY</code></td>
<td>example.com</td>
</tr>
<tr>
<td><code>$ANAXEXP_URL_PRIMARY</code></td>
<td><a href="http://example.com">http://example.com</a></td>
</tr>
<tr>
<td><code>$ANAXEXP_HOSTS</code></td>
<td><code>[ &quot;example.com&quot;, &quot;dev.example.org.wod.by&quot; ]</code></td>
</tr>
</tbody>
</table>
<p>Deprecated variables:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Instead use</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$ANAXEXP_APP_ROOT</code></td>
<td><code>$APP_ROOT</code></td>
</tr>
<tr>
<td><code>$ANAXEXP_APP_DOCROOT</code></td>
<td><code>$HTTP_ROOT</code></td>
</tr>
<tr>
<td><code>$ANAXEXP_CONF</code></td>
<td><code>$CONF_DIR</code></td>
</tr>
<tr>
<td><code>$ANAXEXP_DIR_CONF</code></td>
<td><code>$CONF_DIR</code></td>
</tr>
<tr>
<td>### Xdebug (remote)</td>
<td></td>
</tr>
</tbody>
</table>
<p>Follow these steps to debug your application instance remotely with <a href="http://xdebug.org/docs/install">xdebug</a>:</p>
<ol>
<li>Enable xdebug for your instance from <code>[Instance] &gt; Stack &gt; Settings</code></li>
<li>Set up forwarding for xdebug: copy <em>Xdebug SSH tunnel</em> command from <code>[Instance] &gt; Stack &gt; PHP</code> and run on your local machine</li>
<li>Make sure you have your IDE xdebug listener running on port 9000</li>
<li>Start debugging in IDE</li>
<li>Start your browser debug helper plugin (<a href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc?hl=en">Chrome</a> or <a href="https://addons.mozilla.org/en-us/firefox/addon/the-easiest-xdebug">Firefox</a>) and open the page you want to debug</li>
</ol>
<h3 id="xdebug-local">Xdebug (local)<a class="headerlink" href="#xdebug-local" title="Permanent link">&para;</a></h3>
<h4 id="debugging-web-requests">Debugging web requests<a class="headerlink" href="#debugging-web-requests" title="Permanent link">&para;</a></h4>
<ol>
<li>Uncomment these lines for PHP service in your docker-compose file
    <div class="codehilite"><pre><span></span>PHP_XDEBUG: 1                 
PHP_XDEBUG_DEFAULT_ENABLE: 1
</pre></div></li>
<li>Restart containers (<code>make</code>)    </li>
<li>Start debugging in IDE</li>
<li>Start your browser debug helper plugin (<a href="https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc?hl=en">Chrome</a> or <a href="https://addons.mozilla.org/en-us/firefox/addon/the-easiest-xdebug">Firefox</a>) and open the page you want to debug. Alternatively, enable auto start by adding <code>PHP_XDEBUG_REMOTE_AUTOSTART=1</code></li>
</ol>
<h4 id="debugging-cli-requests">Debugging CLI requests<a class="headerlink" href="#debugging-cli-requests" title="Permanent link">&para;</a></h4>
<ol>
<li>Enable Xdebug as described in the previous section</li>
<li>Uncomment the following environment variables for PHP service in your composer file
    <div class="codehilite"><pre><span></span>PHP_XDEBUG_REMOTE_CONNECT_BACK: 0    
PHP_IDE_CONFIG: serverName=my-ide
</pre></div></li>
<li><a href="#ide-configuration-to-debug-cli-requests">Configure your IDE</a></li>
<li>Perform configuration as described below depending on your OS and Docker version:</li>
</ol>
<h5 id="linux-docker">Linux, Docker<a class="headerlink" href="#linux-docker" title="Permanent link">&para;</a></h5>
<ol>
<li>Uncomment <code>PHP_XDEBUG_REMOTE_HOST: 172.17.0.1</code> for PHP service (if you have docker 18.03+ you can specify <code>host.docker.internal</code> instead of the IP address)</li>
<li>Restart containers (<code>make</code>)</li>
</ol>
<h5 id="macos-docker">macOS, Docker<a class="headerlink" href="#macos-docker" title="Permanent link">&para;</a></h5>
<ol>
<li>Uncomment <code>PHP_XDEBUG_REMOTE_HOST: 10.254.254.254</code> for PHP service (just a random IP that very likely won't be used by anything else).</li>
<li>Restart containers (<code>make</code>)</li>
<li>You also need to have loopback alias with IP from above. You need this only once and that settings stays active until logout or restart:
    <div class="codehilite"><pre><span></span>sudo ifconfig lo0 <span class="nb">alias</span> <span class="m">10</span>.254.254.254
</pre></div></li>
<li>To add the loopback alias after a reboot, add the following contents to <code>/Library/LaunchDaemons/docker4drupal.loopback.plist</code>:
    <div class="codehilite"><pre><span></span><span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>Default Loopback alias<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;array&gt;</span>
      <span class="nt">&lt;string&gt;</span>/sbin/ifconfig<span class="nt">&lt;/string&gt;</span>
      <span class="nt">&lt;string&gt;</span>lo0<span class="nt">&lt;/string&gt;</span>
      <span class="nt">&lt;string&gt;</span>alias<span class="nt">&lt;/string&gt;</span>
      <span class="nt">&lt;string&gt;</span>10.254.254.254<span class="nt">&lt;/string&gt;</span>
      <span class="nt">&lt;string&gt;</span>netmask<span class="nt">&lt;/string&gt;</span>
      <span class="nt">&lt;string&gt;</span>255.255.255.0<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/array&gt;</span>
    <span class="nt">&lt;key&gt;</span>RunAtLoad<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;true/&gt;</span>
  <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</pre></div></li>
</ol>
<h5 id="windows">Windows<a class="headerlink" href="#windows" title="Permanent link">&para;</a></h5>
<ol>
<li>Uncomment <code>PHP_XDEBUG_REMOTE_HOST: 10.0.75.1</code> for PHP service (default IP of Docker NAT).</li>
<li>Restart containers (<code>make</code>)</li>
<li>Allow listen connection for your IDE in <code>Windows Firewall &gt; Allow an app ..</code></li>
</ol>
<p>Also, you might need to add the following lines to your hosts file (see related <a href="https://github.com/anaxexp/docker4drupal/issues/193">github issue</a>):
<div class="codehilite"><pre><span></span>0.0.0.0         localhost
10.0.75.1       localhost
</pre></div></p>
<h4 id="ide-configuration">IDE configuration<a class="headerlink" href="#ide-configuration" title="Permanent link">&para;</a></h4>
<p>You must additionally configure your IDE to debug CLI requests.</p>
<h5 id="phpstorm">PHPStorm<a class="headerlink" href="#phpstorm" title="Permanent link">&para;</a></h5>
<ol>
<li>Open <code>Run &gt; Edit Configurations</code> from the main menu, choose <code>Defaults &gt; PHP Web Page</code> in the left sidebar</li>
<li>Click to <code>[...]</code> to the right of <code>Server</code> and add a new server<ul>
<li>Enter name <code>my-ide</code> (as specified in <code>PHP_IDE_CONFIG</code>)</li>
<li>Enter any host, it does not matter</li>
<li>Check <code>Use path mappings</code>, select path to your project and enter <code>/var/www/html</code> in the right column (Absolute path on the server) </li>
</ul>
</li>
<li>Choose newly created server in "Server" for PHP Web Page</li>
<li>Save settings</li>
</ol>
<h3 id="newrelic">NewRelic<a class="headerlink" href="#newrelic" title="Permanent link">&para;</a></h3>
<p>You can add NewRelic APM monitoring for PHP by adding environment variables <code>PHP_NEWRELIC_ENABLED=1</code> and <code>PHP_NEWRELIC_LICENSE</code> with your license number to PHP-FPM container. Application name will be automatically set to <code>[AnaxExp Application Name] - [AnaxExp Instance Name]</code>, if you want to change it, use <code>PHP_NEWRELIC_APPNAME</code>. </p>
<h3 id="profiling">Profiling<a class="headerlink" href="#profiling" title="Permanent link">&para;</a></h3>
<p>You can profile your PHP application either via Xdebug traces (+<a href="#webgrind">Webgrind</a>) or Tideways XHProf extensions.</p>
<h3 id="wp-cli">WP CLI<a class="headerlink" href="#wp-cli" title="Permanent link">&para;</a></h3>
<p>PHP container comes with pre-installed WP CLI.</p>
<h3 id="redirects">Redirects<a class="headerlink" href="#redirects" title="Permanent link">&para;</a></h3>
<p>If you need to make a redirect from one domain to another you can do it by customizing configuration files of nginx or by adding the snippets below to your <code>wp-config.php</code> file.</p>
<p>Redirect from one domain to another:</p>
<div class="codehilite"><pre><span></span><span class="x">if (isset($_SERVER[&#39;ANAXEXP_ENVIRONMENT_TYPE&#39;]) &amp;&amp; $_SERVER[&#39;ANAXEXP_ENVIRONMENT_TYPE&#39;] == &#39;prod&#39; &amp;&amp; php_sapi_name() != &quot;cli&quot;) {</span>
<span class="x">    if ($_SERVER[&#39;HTTP_HOST&#39;] == &#39;redirect-from-domain.com&#39;) {</span>
<span class="x">      header(&#39;HTTP/1.0 301 Moved Permanently&#39;);</span>
<span class="x">      header(&#39;Location: http://redirect-to-domain.com&#39; . $_SERVER[&#39;REQUEST_URI&#39;]);</span>
<span class="x">      exit();</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>

<p>Redirect from multiple domains:</p>
<div class="codehilite"><pre><span></span><span class="x">if (isset($_SERVER[&#39;ANAXEXP_ENVIRONMENT_TYPE&#39;]) &amp;&amp; $_SERVER[&#39;ANAXEXP_ENVIRONMENT_TYPE&#39;] == &#39;prod&#39; &amp;&amp; php_sapi_name() != &quot;cli&quot;) {</span>
<span class="x">    $redirect_from = array(</span>
<span class="x">      &#39;redirect-from-domain-1.com&#39;,</span>
<span class="x">      &#39;redirect-from-domain-2.com&#39;,</span>
<span class="x">    );</span>

<span class="x">    if (in_array($_SERVER[&#39;HTTP_HOST&#39;], $redirect_from)) {</span>
<span class="x">      header(&#39;HTTP/1.0 301 Moved Permanently&#39;);</span>
<span class="x">      header(&#39;Location: http://redirect-to-domain.com&#39; . $_SERVER[&#39;REQUEST_URI&#39;]);</span>
<span class="x">      exit();</span>
<span class="x">    }</span>
<span class="x">}</span>
</pre></div>

<h2 id="crond">Crond<a class="headerlink" href="#crond" title="Permanent link">&para;</a></h2>
<p>A duplicate of the main PHP container runs with crond (instead of FPM). You can customize crontab from <code>[Instance] &gt; Stack &gt; Settings</code> page.</p>
<h2 id="sshd">SSHd<a class="headerlink" href="#sshd" title="Permanent link">&para;</a></h2>
<p>A duplicate of PHP container runs with SSH daemon (instead of FPM). You can find access information on <code>[Instance] &gt; Stack &gt; SSH</code></p>
<p>Public SSH keys from your AnaxExp profile will be added automatically for all users that have access to an instance. </p>
<h2 id="mailhog">Mailhog<a class="headerlink" href="#mailhog" title="Permanent link">&para;</a></h2>
<p>If Mailhog service enabled and chosen as <em>Mail delivery service</em> at <code>[Instance] &gt; Stack &gt; Settings</code> all outbound email will be caught by the Mailhog. You can view and release these emails from Mailhog UI, the URL can be found from Domains tab. When release specify <code>opensmtpd</code> in <code>SMTP server</code> field if you want to release emails to the default Mail transfer agent (<a href="../../opensmtpd/">OpenSMTPD</a>).</p>
<h2 id="opensmtpd">OpenSMTPD<a class="headerlink" href="#opensmtpd" title="Permanent link">&para;</a></h2>
<p>See <a href="../../opensmtpd/">OpenSMTPD stack documentation</a>.</p>
<h2 id="mariadb">MariaDB<a class="headerlink" href="#mariadb" title="Permanent link">&para;</a></h2>
<p>See <a href="../../mariadb/">MariaDB stack documentation</a>.</p>
<h2 id="nodejs">Node.js<a class="headerlink" href="#nodejs" title="Permanent link">&para;</a></h2>
<p>Light-weight node.js container to help you build your application's frontend. The containers comes without any global pre-installed packages, you can add them by running <code>yarn global add PACKAGE</code> or by running <code>yarn</code> in a directory with your <code>package.json</code> file.</p>
<h2 id="redis">Redis<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h2>
<p>You can configure Redis via environment variables that listed at <a href="https://github.com/anaxexp/redis">https://github.com/anaxexp/redis</a>. See <a href="https://cloud.anaxexp.com/stackhub/7548eb5a-c61b-4480-9f36-2501917692b3">Redis stack</a> for more details.</p>
<p>Integration:</p>
<ol>
<li>Install and activate <a href="https://wordpress.org/plugins/redis-cache">redis plugin</a></li>
<li>Go to redis plugin settings page and click "enable object cache" button</li>
</ol>
<h2 id="varnish">Varnish<a class="headerlink" href="#varnish" title="Permanent link">&para;</a></h2>
<p>Integration:</p>
<ol>
<li>Go to <code>App instance &gt; Stack &gt; Varnish</code> in AnaxExp dashboard and copy automatically generated value of <code>$VARNISH_PURGE_KEY</code></li>
<li>Install and activate <a href="https://wordpress.org/plugins/vcaching">Varnish Caching plugin</a> in your WordPress website</li>
<li>On the plugin cache settings configure as shown below:<br />
<img alt="Varnish Caching plugin settings" src="../../../assets/wp-varnish-caching-plugin-settings.png" /></li>
<li>Copy/paste the key to <code>Purge key</code> in plugin setting </li>
<li>Save all plugin settings changes</li>
</ol>
<p>For more details see <a href="../../varnish/">Varnish stack documentation</a></p>
<h2 id="rsyslog">Rsyslog<a class="headerlink" href="#rsyslog" title="Permanent link">&para;</a></h2>
<p>Rsyslog can be used to stream your applications logs. It's similar to using syslog, however there's no syslog in PHP container (one process per container). Rsyslog will stream all incoming logs to a container output.</p>
<p>You can use <a href="https://packagist.org/packages/monolog/monolog">Monolog</a> with <code>SyslogUdpHandler</code> to stream logs to rsyslog</p>
<h2 id="blackfire">Blackfire<a class="headerlink" href="#blackfire" title="Permanent link">&para;</a></h2>
<p>You can profile your application via blackfire.io by following the next steps:</p>
<ul>
<li>Enable blackfire probe extension by adding the environment variable <code>PHP_BLACKFIRE=1</code> to PHP container</li>
<li>Enable blackfire agent service in your stack</li>
<li>Add environment variables <code>BLACKFIRE_SERVER_ID</code> and <code>BLACKFIRE_SERVER_TOKEN</code> to blackfire agent service with appropriate values from your blackfire.io profile</li>
<li>Install blackfire companion extension for <a href="https://blackfire.io/docs/integrations/chrome">Chrome</a> or <a href="https://blackfire.io/docs/integrations/firefox">Firefox</a></li>
<li>Start profiling your app via the extension and see data from blackfire.io dashboard</li>
</ul>
<p>Fore more details please refer to the <a href="https://blackfire.io/docs/introduction">blackfire official documentation</a></p>
<h2 id="webgrind">Webgrind<a class="headerlink" href="#webgrind" title="Permanent link">&para;</a></h2>
<p>Webgrind allows you view and analyze Xdebug profiler output and generate call graphs for visualisation. To use Webgrind first enable Xdebug profiler by adding the following environment variables to your PHP container:</p>
<div class="codehilite"><pre><span></span>PHP_XDEBUG: 1
PHP_XDEBUG_PROFILER_ENABLE: 1
PHP_XDEBUG_PROFILER_ENABLE_TRIGGER: 1
PHP_XDEBUG_PROFILER_ENABLE_TRIGGER_VALUE: 1
</pre></div>

<p>Add <code>XDEBUG_PROFILE=1</code> param to GET or POST request (or set a cookie) you want to profile. Xdebug will generate profile files in <code>/mnt/files/xdebug/profiler</code>. Click Update in Webgrind to access the new information. See <a href="https://xdebug.org/docs/profiler">https://xdebug.org/docs/profiler</a> to learn more about xdebug profiling.</p>
<div class="admonition warning">
<p class="admonition-title">IMPORTANT</p>
<p>Xdebug profiling significantly decreases performance and increases resources usage. DO NOT USE it on Production servers.</p>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
    
    <div class="md-footer-nav">
        <nav class="md-footer-nav__inner md-grid">
            
            <a href="stacks/wordpress/" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
                </div>
                <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                Previous
                </span>
              Overview
              </span>
                </div>
            </a>
            
            
            <a href="stacks/wordpress/local/" title="Local environment" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
                <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                Next
                </span>
              Local environment
              </span>
                </div>
                <div class="md-flex__cell md-flex__cell--shrink">
                    <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
                </div>
            </a>
            
        </nav>
    </div>
    
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
            <a target="_blank" href="http://anaxexp.com/" title="AnaxExp" class="md-header-nav__button md-logo">
                <img src="../../../assets/images/anaxexp-logo.png" width="24" height="24">
            </a>

            
            
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://anaxexp.com" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/anaxexp" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/AnaxExpHQ" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

            
        </div>
    </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.1",url:{base:"../../.."}})</script>
      
        <script src="../../../assets/intercom.js"></script>
      
        <script src="../../../assets/anaxexp.js"></script>
      
    
    
      
    
  </body>
</html>